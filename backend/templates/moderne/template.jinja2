<div class="cv-container">
  <!-- En-tête avec gradient -->
  <header class="header">
    <div class="profile-section">
      {% if data.profile.photo %}
      <div class="profile-image">
        <img src="{{ data.profile.photo }}" alt="{{ data.profile.name | default('Photo') }}">
      </div>
      {% endif %}
      <div class="profile-info">
        <h1 class="name">{{ data.profile.name | default('NOM PRÉNOM') }}</h1>
        {% if data.profile.title %}
        <p class="tagline">{{ data.profile.title }}</p>
        {% endif %}
      </div>
    </div>
    
    <!-- Contact -->
    <div class="contact-info">
      {% if data.profile.phone %}
      <div class="contact-item">
        <i class="fas fa-phone"></i>
        <span>{{ data.profile.phone }}</span>
      </div>
      {% endif %}
      {% if data.profile.email %}
      <div class="contact-item">
        <i class="fas fa-envelope"></i>
        <span>{{ data.profile.email }}</span>
      </div>
      {% endif %}
      {% if data.profile.location %}
      <div class="contact-item">
        <i class="fas fa-map-marker-alt"></i>
        <span>{{ data.profile.location }}</span>
      </div>
      {% endif %}
      {% if data.profile.linkedin %}
      <div class="contact-item">
        <i class="fab fa-linkedin"></i>
        <span>{{ data.profile.linkedin }}</span>
      </div>
      {% endif %}
    </div>
  </header>

  <!-- Contenu principal en deux colonnes -->
  <div class="main-content">
    <!-- Colonne gauche -->
    <div class="left-column">
      <!-- Compétences -->
      {% if data.skills and data.skills.groups %}
      <section class="section">
        <h3 class="section-title"><i class="fas fa-tools"></i> COMPÉTENCES</h3>
        <div class="skills-grid">
          {% for group in data.skills.groups %}
          <div class="skill-category">
            {% if group.label %}
            <h4>{{ group.label }}</h4>
            {% endif %}
            {% for skill in group["items"] | default([]) %}
            <div class="skill-item"><span>{{ skill }}</span></div>
            {% endfor %}
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Langues -->
      {% if data.languages %}
      <section class="section">
        <h3 class="section-title"><i class="fas fa-language"></i> LANGUES</h3>
        <div class="skills-grid">
          {% for lang in data.languages %}
          <div class="skill-item">
            <span><strong>{{ lang.name }}:</strong> {{ lang.level }}</span>
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}
    </div>

    <!-- Colonne droite -->
    <div class="right-column">
      <!-- À propos -->
      {% if data.summary %}
      <section class="section">
        <h3 class="section-title"><i class="fas fa-user"></i> À PROPOS</h3>
        <p class="about-text">{{ data.summary }}</p>
      </section>
      {% endif %}

      <!-- Expérience Professionnelle -->
      {% if data.experience %}
      <section class="section">
        <h3 class="section-title"><i class="fas fa-briefcase"></i> EXPÉRIENCE PROFESSIONNELLE</h3>
        <div class="timeline">
          {% for exp in data.experience %}
          <div class="timeline-item">
            {% if exp.dates or (exp.start and exp.end) %}
            <div class="timeline-date">{{ exp.dates | default(exp.start ~ ' - ' ~ exp.end) }}</div>
            {% endif %}
            <div class="timeline-content">
              {% if exp.position or exp.role %}
              <h4>{{ exp.position | default(exp.role) }}</h4>
              {% endif %}
              {% if exp.company %}
              <h5>{{ exp.company }}</h5>
              {% endif %}
              {% if exp.tasks or exp.bullets %}
              <ul>
                {% for task in exp.tasks | default(exp.bullets) %}
                <li>{{ task }}</li>
                {% endfor %}
              </ul>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Formation -->
      {% if data.education %}
      <section class="section">
        <h3 class="section-title"><i class="fas fa-graduation-cap"></i> FORMATION</h3>
        <div class="timeline">
          {% for edu in data.education %}
          <div class="timeline-item">
            {% if edu.dates or edu.year %}
            <div class="timeline-date">{{ edu.dates | default(edu.year) }}</div>
            {% endif %}
            <div class="timeline-content">
              {% if edu.degree %}
              <h4>{{ edu.degree }}</h4>
              {% endif %}
              {% if edu.institution or edu.school %}
              <h5>{{ edu.institution | default(edu.school) }}</h5>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}
    </div>
  </div>
</div>

<div class="pdf-button-container">
  <button id="downloadPdf" class="pdf-button"><i class="fas fa-download"></i> Télécharger PDF</button>
</div>

<script>
  const btn = document.getElementById('downloadPdf');
  if (btn) btn.addEventListener('click', () => window.print());
</script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
